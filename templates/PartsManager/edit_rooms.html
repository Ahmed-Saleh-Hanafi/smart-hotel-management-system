{% extends 'base_manager.html'%}
{% block content%}
{% load static%}
<style>
    .upload-image-btn{
        padding: 10px 15px;
    margin-right: 10px;
    border: none;
    border-radius: 4px;
    background-color: #4a90e2;
    color: #fff;
    cursor: pointer;
    }
</style>
<div class="content">
    <!-- Room Form -->
    <form id="roomForm" class="form-container" method="post" >
        {% csrf_token %}
        <h2>Add Room</h2>
        <div class="form-group">
            <label for="roomID">Room ID:</label>
            <input value="{{room.room_id}}" type="text" id="roomID" name="roomID" readonly>
        </div>
        <div class="form-group">
            <label for="roomNumber">Room Number:</label>
            <input value="{{room.room_number}}" type="text" id="roomNumber" name="roomNumber">
        </div>
        <div class="form-group">
            <label for="roomPhone">Phone Number:</label>
            <input value="{{room.phone_room}}" type="text" id="roomPhone" name="roomPhone">
        </div>
        <div class="form-group">
            <label for="roomType">Room Type:</label>
            <select id="roomType" name="roomType">
                {% if room%}
                <option value="{{room.type.room_type_id}}">{{room.type.name}}</option>
                {% else%}
                <option value="">Select a room type</option>
                {% endif%}
                {% for type in room_types%}
                <option value="{{type.room_type_id}}">{{type.name}}</option>
                {% endfor%}
            </select>
        </div>
        <div class="form-group">
            <label for="status">Status:</label>
            <select id="status" name="status">
                {% if room%}
                <option value="{{room.status}}">{{room.status}}</option>
                {% else%}
                <option value="">Select status</option>
                {% endif%}
                <option value="Vacant">Vacant</option>
                <option value="Occupied">Occupied</option>
                <option value="Cleaning">Cleaning</option>
                <option value="Maintenance">Maintenance</option>
            </select>
        </div>
        <div class="form-group">
            <label for="price">Price:</label>
            <input value="{{room.type.base_price}}" type="number" id="price" name="price" step="0.01" readonly>
        </div>

        <div class="button-group">
            <button type="submit">Save</button>
            {% if room%}
            <a href="{% url 'manger_delete_room' room.room_id %}"><button
                    onclick="return confirm('Are you sure you want to delete this room?');"
                    style="background-color: brown;">Delete</button></a>
            {% endif%}
        </div>
    </form>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <label for="roomImage" class="profile-image-wrapper">
            <img id="profilePreview" src="{% static 'img/profile.webp'%}" alt="Profile" style="height: 100px;" />
            <input type="file" id="roomImage" accept="image/*" style="display: none" name="image" />
        </label>
        <button type="submit" class="upload-image-btn">Upload Image</button>
    </form>
</div>
<script>
    const roomImage = document.getElementById('roomImage');
    const profilePreview = document.getElementById('profilePreview');

    roomImage.addEventListener('change', function () {
        const file = this.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                profilePreview.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }
    });
</script>
{% endblock content%}